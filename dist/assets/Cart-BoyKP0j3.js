import{u as P}from"./cart-DDR8xpIB.js";import{d as L,r as D,M,G as w,c as m,o as p,b as n,e as o,F as V,H as z,p as B,w as s,K as i,h as a,as as R,ac as v,g as S,j as f,av as q,I as G,k as y,a7 as A,a6 as F,a4 as Q}from"./index-DTjOUT29.js";/* empty css                                                                    */import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./api-D0beKIRp.js";const j={class:"card-content"},H={class:"image"},K=["src"],J={class:"info"},O={class:"title"},W={class:"price"},X={class:"price-old"},Y={class:"price-now"},Z={class:"operation"},tt=["onClick"],ot={class:"subtotal"},at={key:0,class:"discount"},et={class:"final-total"},nt={class:"final-total-discount"},lt={class:"operation-btn"},st={__name:"MobileCartCard",props:{data:Array},emits:["update-cart"],setup($,{emit:u}){const g=$,h=u,e=P(),C=L(),k=D(!1),c=D(""),T=async r=>{await e.editCartProduct(r)},N=async r=>{k.value=!0;try{await e.deleteCartProduct(r)}finally{k.value=!1}},U=async r=>{try{await e.getCoupon(r),h("update-cart")}catch(t){console.error(t)}};return M(()=>e.couponCode,r=>{r&&(c.value=r)},{immediate:!0}),(r,t)=>{const _=w("RouterLink"),x=w("font-awesome-icon");return p(),m(V,null,[(p(!0),m(V,null,z(g.data,d=>(p(),B(a(v),{class:"cart-card",key:d.id},{default:s(()=>[o("div",j,[o("div",H,[o("img",{src:d.product.imagesUrl[0],alt:"商品圖片"},null,8,K)]),o("div",J,[n(_,{to:{path:`/product/${d.product.id}`}},{default:s(()=>[o("h3",O,i(d.product.title),1)]),_:2},1032,["to"]),o("div",W,[o("span",X,"NTD "+i(d.product.origin_price),1),o("span",Y,"NTD "+i(d.product.price),1)]),o("div",Z,[n(a(R),{modelValue:d.qty,"onUpdate:modelValue":b=>d.qty=b,min:1,size:"small",onChange:b=>T(d)},null,8,["modelValue","onUpdate:modelValue","onChange"]),o("i",{onClick:b=>N(d.id)},[n(x,{icon:["far","trash-can"]})],8,tt)]),o("div",ot,[o("p",null,"小計: NTD "+i(d.total),1)])])])]),_:2},1024))),128)),n(a(v),{class:"cart-coupon"},{default:s(()=>[t[4]||(t[4]=o("h5",null,"您是否有優惠碼？",-1)),n(a(S),{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=d=>c.value=d),placeholder:"請輸入優惠碼",class:"input-with-search"},{append:s(()=>[n(a(f),{onClick:t[0]||(t[0]=d=>U(c.value)),type:"text",icon:a(q),class:"icon-button"},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),n(a(v),{class:"cart-price-card"},{default:s(()=>[t[8]||(t[8]=o("h5",null,"購物車清單",-1)),a(e).couponCode.length>0?(p(),m("div",at,[t[5]||(t[5]=o("p",null,"優惠碼",-1)),o("p",null,i(a(e).couponCode),1)])):G("",!0),o("div",et,[t[6]||(t[6]=o("p",null,"小計",-1)),o("p",null,"NTD "+i(a(e).cartData.total>0?a(e).cartData.total:0),1)]),o("div",nt,[t[7]||(t[7]=o("p",null,"總計",-1)),o("p",null,"NTD "+i(a(e).cartData.final_total>0?Math.round(a(e).cartData.final_total):0),1)])]),_:1}),o("div",lt,[n(a(f),{type:"primary",onClick:t[2]||(t[2]=d=>a(C).push("/checkout"))},{default:s(()=>t[9]||(t[9]=[y("前往結帳")])),_:1}),n(a(f),{onClick:t[3]||(t[3]=d=>a(C).back())},{default:s(()=>t[10]||(t[10]=[y("繼續購物")])),_:1})])],64)}}},rt=I(st,[["__scopeId","data-v-32a18384"]]),dt=["src"],it={class:"new-price"},ut={class:"old-price"},ct=["onClick"],pt={class:"card-wrapper"},_t={key:0,class:"discount"},mt={class:"final-total"},ft={class:"final-total-discount"},Ct={class:"operation-btn"},vt={__name:"DesktopCartTable",props:{data:Array},emits:["update-cart"],setup($,{emit:u}){const g=$,h=u,e=P(),C=L(),k=D(!1),c=D(""),T=async r=>{await e.editCartProduct(r)},N=async r=>{k.value=!0;try{await e.deleteCartProduct(r)}finally{k.value=!1}},U=async r=>{try{await e.getCoupon(r),h("update-cart")}catch(t){console.error(t)}};return M(()=>e.couponCode,r=>{r&&(c.value=r)},{immediate:!0}),(r,t)=>{const _=A,x=w("RouterLink"),d=w("font-awesome-icon"),b=F;return p(),m(V,null,[n(b,{data:g.data,"table-layout":"auto",stripe:""},{default:s(()=>[n(_,{label:"圖片",width:"100"},{default:s(({row:l})=>[o("img",{src:l.product.imagesUrl[0],alt:"product image",class:"product-img"},null,8,dt)]),_:1}),n(_,{prop:"product.title",label:"商品名稱"},{default:s(({row:l})=>[n(x,{to:{path:`/product/${l.product.id}`}},{default:s(()=>[y(i(l.product.title),1)]),_:2},1032,["to"])]),_:1}),n(_,{label:"價格",width:"1",align:"center"},{default:s(({row:l})=>[o("span",it,"NTD "+i(l.product.price),1),t[4]||(t[4]=o("br",null,null,-1)),o("small",ut,"NTD "+i(l.product.origin_price),1)]),_:1}),n(_,{label:"數量",width:"1",align:"center"},{default:s(({row:l})=>[n(a(R),{modelValue:l.qty,"onUpdate:modelValue":E=>l.qty=E,min:1,onChange:E=>T(l),size:"small"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(_,{prop:"total",label:"小計",align:"center",width:"1"}),n(_,{prop:"",width:"50",align:"center"},{default:s(({row:l})=>[o("i",{onClick:E=>N(l.id),class:"delete-icon"},[n(d,{icon:["far","trash-can"]})],8,ct)]),_:1})]),_:1},8,["data"]),o("div",pt,[n(a(v),{class:"cart-coupon"},{default:s(()=>[t[5]||(t[5]=o("h5",null,"您是否有優惠碼？",-1)),n(a(S),{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=l=>c.value=l),placeholder:"請輸入優惠碼",class:"input-with-search"},{append:s(()=>[n(a(f),{onClick:t[0]||(t[0]=l=>U(c.value)),type:"text",icon:a(q),class:"icon-button"},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),n(a(v),{class:"cart-price-card"},{default:s(()=>{var l;return[t[9]||(t[9]=o("h5",null,"購物車清單",-1)),a(e).couponCode.length>0?(p(),m("div",_t,[t[6]||(t[6]=o("p",null,"優惠碼",-1)),o("p",null,i(a(e).couponCode),1)])):G("",!0),o("div",mt,[t[7]||(t[7]=o("p",null,"小計",-1)),o("p",null,"NTD "+i(a(e).cartData.total>0?a(e).cartData.total:0),1)]),o("div",ft,[t[8]||(t[8]=o("p",null,"總計",-1)),o("p",null,"NTD "+i(((l=a(e).cartData)==null?void 0:l.final_total)>0?Math.round(a(e).cartData.final_total):0),1)])]}),_:1}),o("div",Ct,[n(a(f),{type:"primary",onClick:t[2]||(t[2]=l=>a(C).push("/checkout"))},{default:s(()=>t[10]||(t[10]=[y("前往結帳")])),_:1}),n(a(f),{onClick:t[3]||(t[3]=l=>a(C).back())},{default:s(()=>t[11]||(t[11]=[y("繼續購物")])),_:1})])])],64)}}},yt=I(vt,[["__scopeId","data-v-3212cf4b"]]),gt={class:"container"},kt={class:"cart-container-mobile"},bt={class:"table-container"},$t={__name:"Cart",setup($){const u=P(),g=L();return Q(()=>{u.getCartProducts()}),(h,e)=>(p(),m("div",gt,[e[3]||(e[3]=o("div",{class:"cart-title"},[o("h4",null,"購物車")],-1)),a(u).cartList.length===0?(p(),B(a(v),{key:0,class:"empty-cart-text"},{default:s(()=>[e[2]||(e[2]=o("h5",null,"你的購物車是空的喔!",-1)),n(a(f),{type:"primary",onClick:e[0]||(e[0]=C=>a(g).push("/products"))},{default:s(()=>e[1]||(e[1]=[y(" 前往購物 ")])),_:1})]),_:1})):(p(),m(V,{key:1},[o("div",kt,[n(a(rt),{data:a(u).cartList,onUpdateCart:a(u).getCartProducts},null,8,["data","onUpdateCart"])]),o("div",bt,[n(a(yt),{data:a(u).cartList,onUpdateCart:a(u).getCartProducts},null,8,["data","onUpdateCart"])])],64))]))}},Nt=I($t,[["__scopeId","data-v-d0bf2069"]]);export{Nt as default};
